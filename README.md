## Introdução

O setor de aviação de baixo custo enfrenta desafios constantes para otimizar recursos e aumentar a competitividade. A adoção do sistema de venda compartilhada de passagens (PASSCOM) por três companhias aéreas visa melhorar a acessibilidade e maximizar os lucros por meio de uma solução que permite a reserva integrada de trechos de voos entre diferentes empresas. No entanto, cada companhia possui um servidor centralizado e independente, o que torna necessário desenvolver uma comunicação distribuída entre esses servidores. A solução ideal deve garantir que o primeiro cliente a selecionar um trecho tenha preferência e que o sistema seja resiliente a falhas e sem pontos únicos de falha.

Para atender a esses requisitos, este projeto desenvolveu uma aplicação distribuída baseada em contêineres Docker e em uma arquitetura RESTful para comunicação entre os servidores. A solução foi dividida em microserviços, cada um responsável por funções específicas como autenticação e gestão de trechos, assegurando escalabilidade e facilidade de manutenção. Testes de software verificaram a robustez do sistema e demonstraram que a aplicação cumpre com a reserva prioritária e com a segurança das transações. O sistema está pronto para implementação, proporcionando uma integração eficiente entre as LCCs e contribuindo para uma experiência de compra simplificada e confiável para o cliente.

## Especifique os componentes desenvolvidos e seus papeis nessa arquitetura. Como você classificaria a arquitetura usada na solução?

O sistema de venda compartilhada de passagens foi projetado com uma arquitetura distribuída baseada em microserviços. Cada componente foi desenvolvido com um papel específico e encapsulado em contêineres Docker, o que facilita o deploy e a escalabilidade do sistema. Os componentes principais incluem os Controladores, que atuam como intermediários das requisições do cliente e organizam a lógica de negócio; as Classes de Domínio, que representam as entidades centrais, como usuários e trechos de voo; e os Serviços, responsáveis por implementar a lógica para manipulação de dados e comunicação entre servidores. Além disso, foram desenvolvidas diversas classes DTO (Data Transfer Object) para padronizar a troca de informações e assegurar que os dados compartilhados entre os microserviços estejam formatados corretamente.

A comunicação entre os servidores das companhias aéreas foi estruturada por meio de APIs RESTful, garantindo interoperabilidade e evitando bloqueios de firewall. Cada servidor possui suas rotas configuradas para permitir consultas e transações de reserva de trechos, respeitando o princípio de preferência do cliente e assegurando a consistência da venda compartilhada. Também foi incorporado um módulo de Segurança, que utiliza tokens para autenticação, garantindo que apenas usuários autorizados possam realizar transações. O módulo de tratamento de exceções foi implementado para lidar com erros específicos, como trechos já vendidos ou credenciais inválidas, evitando que falhas individuais comprometam o sistema como um todo.

A arquitetura utilizada na solução pode ser classificada como distribuída e orientada a microserviços. Esse modelo proporciona alta modularidade, permitindo que os diferentes componentes operem independentemente e facilitando a manutenção e o escalonamento do sistema conforme necessário. Essa abordagem distribuída, combinada com a flexibilidade dos contêineres Docker, garante resiliência a falhas e uma melhor gestão de recursos entre os servidores, eliminando a necessidade de uma solução centralizada e, assim, mitigando potenciais pontos únicos de falha.

## Especifique as APIs de comunicação implementadas entre os componentes desenvolvidos, descrevendo os métodos remotos, parametros e retornos empregados para permitir a compra de passagens entre clientes e servidores, e entre servidores.

As APIs de comunicação implementadas no sistema permitem que clientes reservem passagens de múltiplas companhias, estabelecendo também uma comunicação direta entre os servidores das LCCs para coordenar a disponibilidade dos trechos. Cada servidor disponibiliza uma série de endpoints RESTful para gerenciar as reservas e responder a consultas de disponibilidade de trechos. Entre os métodos mais importantes, temos o POST /reservarTrecho, que recebe como parâmetros o identificador do trecho, os dados do cliente e o token de autenticação, e verifica se o trecho está disponível para reserva. Caso esteja, o sistema marca o trecho como reservado, retornando um objeto com a confirmação e o código da transação para o cliente.

Além disso, para coordenar a disponibilidade de assentos entre servidores, foram implementados métodos remotos como o GET /consultarDisponibilidade. Esse endpoint recebe o identificador de um trecho de outra companhia e retorna o status de disponibilidade em tempo real. Quando um cliente inicia uma transação envolvendo múltiplas companhias, o servidor consulta a disponibilidade dos trechos adicionais por meio desse método antes de concluir a compra. Outro método importante é o POST /confirmarReserva, que é chamado entre servidores para bloquear temporariamente um assento em um voo, mantendo a preferência do cliente até que ele conclua a compra. Caso a reserva não seja finalizada em um período determinado, o bloqueio é desfeito automaticamente para evitar indisponibilidades indevidas.

Essas APIs são fundamentais para garantir a integridade e a confiabilidade da compra de passagens, seja para clientes ou entre os próprios servidores das companhias. Os parâmetros e retornos padronizados, junto ao uso de tokens de autenticação, asseguram que as transações sejam realizadas com segurança e com os dados necessários para uma resposta ágil e precisa. Com essa estrutura, o sistema viabiliza uma experiência de compra integrada e sem falhas, permitindo que os servidores das LCCs operem de forma sincronizada e transparente para os usuários.

## Qual o método usado para o cálculo distribuído das rotas entre origem e destino da passagem, e se o sistema consegue mostrar para os usuários todas as rotas possíveis considerando os trechos disponíveis nos servidores de todas as companhias.

Para o cálculo das rotas entre a origem e o destino de uma passagem, o sistema utiliza um algoritmo distribuído de busca de caminhos que identifica as conexões disponíveis entre os trechos oferecidos pelas diferentes companhias. Cada servidor armazena a informação sobre seus próprios trechos e comunica essas informações para os demais servidores ao receber uma consulta de rota de um cliente. Quando um cliente solicita uma passagem de um ponto de origem até um destino, o servidor inicial verifica as rotas possíveis internamente e, caso o destino ou algum dos trechos intermediários não estejam disponíveis em sua própria base de dados, ele consulta os servidores das outras companhias para obter as opções adicionais. Esse processo é feito de forma otimizada, garantindo que o cliente visualize as melhores rotas sem um tempo de resposta elevado.

O sistema é capaz de exibir todas as rotas possíveis, considerando os trechos que estão disponíveis em cada um dos servidores das companhias participantes. A partir das respostas obtidas de cada servidor, o sistema compila as rotas viáveis e exibe para o usuário as opções com base na ordem e disponibilidade dos trechos. Dessa forma, o usuário consegue visualizar as combinações de trechos entre as diferentes companhias, sendo possível reservar a rota completa em uma única transação. Essa abordagem distribuída permite que as informações sobre trechos sejam atualizadas em tempo real, garantindo que apenas as rotas realmente disponíveis sejam apresentadas, o que facilita a tomada de decisão por parte do cliente e aumenta a confiabilidade do sistema.
